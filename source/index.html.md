---
title: API Reference

language_tabs: # must be one of https://git.io/vQNgJ
  - javascript

toc_footers:
  - <a href='#'>Sign Up for a Developer Key</a>
  - <a href='https://github.com/lord/slate'>Documentation Powered by Slate</a>

includes:
  - errors

search: true
---

# Introduction

Wemine Payment official document

# Endpoint
All API requests must be made over HTTPS

Stable version: ```v1```

Production: ```https://api.pay.wemine.net/{version}/```

# Authentication

```javascript
var request = require("request");

request({
  headers: { 'api-key': 'live_ly83rGP2Bo' }
})
```

To identify you account when using the API you should including your API key in the request header, please aware some of the action need to pass the api-token (Generated by API Key and API Secrect) for processing with higher premission.

`api-key: live_ly83rGP2Bo`


or

`api-token: tB2d71cDz4g1MjQlczdkxN2lLKO8BwlnJrsVh3O3`

<aside class="warning">
Remember not to show any of you credentials on publicly accessible areas such client-side code(.js), GitHub, etc.
</aside>

# Create Payment

## Create New Payment

```javascript
var request = require("request");

var options = {
  method: 'POST',
  url: 'https://api.pay.wemine.net/v1/order',
  headers:
   {
     'Cache-Control': 'no-cache',
     'api-key': 'live_ly83rGP2Bo',
     'Content-Type': 'application/json'
   },
  body:
   {
     "out_trade_no":"9900000000",
     "body":"Demo Order",
     "fee_type":"HKD",
     "total_fee":"150",
     "open_id":"o3OAhO5yVZ7xAakJ3c5e13OAhO-M",
     "trade_type":"JSAPI"
   },
  json: true
};

request(options, function (error, response, body) {
  if (error) throw new Error(error);
  console.log(body);
});

```

> The above command returns JSON structured like this:

```json
{
    "return_code": "SUCCESS",
    "return_msg": "OK",
    "appid": "wxc853q0593o3bfd75",
    "mch_id": "1874657283",
    "sub_mch_id": "1878384950",
    "nonce_str": "ZD4iyBJCUy8fjDy3",
    "sign": "3USZ2AXNY6I8YE4GAO3UE65ISOA0H6",
    "result_code": "SUCCESS",
    "prepay_id": "wx20170101198475af0984ba938572518294",
    "trade_type": "JSAPI",
    "sub_appid": "wx95a1f958273ofe1b"
}
```

### HTTP Request

You can create a new order in JSAPI or QR Code format by this endpoint.
You will retrieve JSON string or `wexin://xxx` deeplink for your customer to pay their order.

`[POST] /order`

### Request Body

| Key | Description | Type | Options |
|----|----|----|----|
| out_trade_no | Order number, must be unique | integer | - |
| body | Your order description, will show on the payment page | string | - |
| fee_type | 3-letter ISO code for currency | string | HKD |
| total_fee | A fee in *cents* | int | - |
| open_id | Payment user openid, need to linked with the official account | string | - |
| trade_type | Order intergration method | string | JSAPI, NATIVE |
